<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Personal Assistant</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      background-color: #e8f0fa;
      color: #333;
      transition: background-color 0.3s, color 0.3s;
    }
    .dark-mode {
      background-color: #1a1a1a;
      color: #1a1a1a;
    }
    .container {
      max-width: 500px;
      margin: auto;
      padding: 16px;
    }
    .tabs {
      display: flex;
      border-bottom: 2px solid #ccc;
      margin-bottom: 16px;
    }
    .tab {
      flex: 1;
      text-align: center;
      padding: 12px;
      cursor: pointer;
      background-color: #f0f4f8;
      border: 1px solid #ccc;
      border-bottom: none;
      border-radius: 6px 6px 0 0;
      font-size: 1em;
      color: #555;
      transition: background-color 0.3s, color 0.3s, font-size 0.3s;
    }
    .tab.active {
      background-color: #fff;
      font-weight: bold;
      font-size: 1.25em;
      color: #2c72b4;
      border-bottom: 1px solid #fff;
    }
    .tab-content {
      display: none;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 0 6px 6px 6px;
      padding: 16px;
    }
    .tab-content.active {
      display: block;
    }
    .carousel-container {
      position: relative;
      width: 100%;
      height: 320px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      margin-bottom: 20px;
    }
    .carousel {
      position: sticky;
      top: 20px;
    }
    .carousel img {
      display: none;
      width: 300px;
      height: 300px;
      object-fit: cover;
      border-radius: 10px;
    }
    .carousel img.active {
      display: block;
    }
    .arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: transparent !important;
      color: #2c72b4;
      border: none;
      border-radius: 0 !important;
      width: 40px;
      height: 40px;
      font-size: 20px;
      cursor: pointer;
      z-index: 1;
      outline: none;
    }
    .arrow:focus,
    .arrow:active {
      background: transparent !important;
      outline: none !important;
      box-shadow: none !important;
    }
    .arrow.left {
      left: 10px;
    }
    .arrow.right {
      right: 10px;
    }
    input[type="text"],
    textarea {
      width: 90%;
      display: block;
      margin: 8px auto;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    button {
      padding: 10px 16px;
      margin: 6px 4px;
      background-color: #2c72b4;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background-color: #1c5a94;
    }
    .section {
      margin-bottom: 24px;
    }
    .chat-history, .speak-history {
      max-height: 200px;
      overflow-y: auto;
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 10px;
      background-color: #f9f9f9;
      margin: 8px auto 0;
      width: 90%;
    }
    .message.user {
      text-align: right;
      margin: 4px 0;
    }
    .message.assistant {
      text-align: left;
      margin: 4px 0;
    }
    .message span {
      display: inline-block;
      padding: 8px 12px;
      border-radius: 12px;
    }
    .message.user span {
      background-color: #2c72b4;
      color: #fff;
    }
    .message.assistant span {
      background-color: #e0e0e0;
      color: #333;
    }
    .shortcut-buttons button {
      margin: 4px 2px;
    }
    .settings select {
      width: 90%;
      margin: 8px auto;
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="carousel-container">
      <button class="arrow left" onclick="prev()">◀</button>
      <div id="carousel" class="carousel">
        <img src="assistant1.png" alt="Assistant 1">
        <img src="assistant2.png" alt="Assistant 2">
        <img src="assistant3.png" alt="Assistant 3">
        <img src="assistant4.png" alt="Assistant 4">
        <img src="assistant5.png" alt="Assistant 5">
        <img src="assistant6.png" alt="Assistant 6">
      </div>
      <button class="arrow right" onclick="next()">▶</button>
    </div>

    <div class="tabs">
      <div id="tab-chat" class="tab active" onclick="switchTab('chat')">Talk to Assistant</div>
      <div id="tab-speak" class="tab" onclick="switchTab('speak')">Speak for Me</div>
    </div>

    <!-- Talk to Assistant Tab -->
    <div id="chat" class="tab-content active">
      <div class="section">
        <input
          id="userInput"
          type="text"
          placeholder="Type a message and press Enter"
          onkeydown="if(event.key==='Enter'){ sendMessage(); }"
        >
        <div id="chatHistory" class="chat-history"></div>
      </div>

      <div class="section shortcut-buttons">
        <h2>Shortcut Buttons</h2>
        <button onclick="speakShortcut('I need help')">I need help</button>
        <button onclick="speakShortcut('Thank you')">Thank you</button>
        <button onclick="speakShortcut('Please come here')">Please come here</button>
      </div>

      <div class="section settings">
        <h2>Settings</h2>
        <label>Topics:</label>
        <select id="topics-chat" multiple onchange="saveSettings()">
          <option value="faith">Faith</option>
          <option value="family">Family & Friends</option>
          <option value="health">Health</option>
          <option value="jokes">Jokes</option>
          <option value="music">Music</option>
          <option value="news">News</option>
          <option value="sports">Sports</option>
          <option value="weather">Weather</option>
        </select>
        <div style="margin-top:10px; text-align: center;">
          <label>
            <input
              type="checkbox"
              id="darkToggleChat"
              onchange="toggleDarkMode(); saveSettings()"
            > Dark Mode
          </label>
        </div>
      </div>
    </div>

    <!-- Speak for Me Tab -->
    <div id="speak" class="tab-content">
      <div class="section">
        <textarea
          id="textToSpeak"
          rows="3"
          placeholder="Type here and press Enter to speak"
          onkeydown="if(event.key==='Enter' && !event.shiftKey){ event.preventDefault(); speakText(); }"
        ></textarea>
        <div id="speakHistory" class="speak-history"></div>
      </div>

      <div class="section shortcut-buttons">
        <h2>Shortcut Buttons</h2>
        <button onclick="speakShortcut('I need help')">I need help</button>
        <button onclick="speakShortcut('Thank you')">Thank you</button>
        <button onclick="speakShortcut('Please come here')">Please come here</button>
      </div>

      <div class="section settings">
        <h2>Settings</h2>
        <label>Topics:</label>
        <select id="topics-speak" multiple onchange="saveSettings()">
          <option value="faith">Faith</option>
          <option value="family">Family & Friends</option>
          <option value="health">Health</option>
          <option value="jokes">Jokes</option>
          <option value="music">Music</option>
          <option value="news">News</option>
          <option value="sports">Sports</option>
          <option value="weather">Weather</option>
        </select>
        <div style="margin-top:10px; text-align: center;">
          <label>
            <input
              type="checkbox"
              id="darkToggleSpeak"
              onchange="toggleDarkMode(); saveSettings()"
            > Dark Mode
          </label>
        </div>
      </div>
    </div>
  </div>

  <script>
    const images = document.querySelectorAll('.carousel img');
    let currentIndex = 0;

    function updateCarousel() {
      images.forEach((img, i) => {
        img.classList.remove('active');
        if (i === currentIndex) img.classList.add('active');
      });
    }
    function next() {
      currentIndex = (currentIndex + 1) % images.length;
      updateCarousel();
    }
    function prev() {
      currentIndex = (currentIndex - 1 + images.length) % images.length;
      updateCarousel();
    }

    function switchTab(name) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
      document.getElementById('tab-' + name).classList.add('active');
      document.getElementById(name).classList.add('active');
    }

    function speakText() {
      const text = document.getElementById('textToSpeak').value.trim();
      if (!text) return;
      addSpeakMessage(text);
      const utterance = new SpeechSynthesisUtterance(text);
      speechSynthesis.speak(utterance);
      document.getElementById('textToSpeak').value = '';
    }
    function speakShortcut(phrase) {
      const utterance = new SpeechSynthesisUtterance(phrase);
      speechSynthesis.speak(utterance);
    }
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }

    let chatHistoryArr = [];
    let speakHistoryArr = [];

    function loadHistory() {
      const storedChat = localStorage.getItem('chatHistory');
      if (storedChat) chatHistoryArr = JSON.parse(storedChat);
      renderChatHistory();

      const storedSpeak = localStorage.getItem('speakHistory');
      if (storedSpeak) speakHistoryArr = JSON.parse(storedSpeak);
      renderSpeakHistory();
    }

    function saveHistory() {
      localStorage.setItem('chatHistory', JSON.stringify(chatHistoryArr.slice(-10)));
      localStorage.setItem('speakHistory', JSON.stringify(speakHistoryArr.slice(-10)));
    }

    function renderChatHistory() {
      const container = document.getElementById('chatHistory');
      container.innerHTML = '';
      chatHistoryArr.slice(-10).forEach(msg => {
        const div = document.createElement('div');
        div.classList.add('message', msg.sender);
        const span = document.createElement('span');
        span.innerText = msg.text;
        div.appendChild(span);
        container.appendChild(div);
      });
      container.scrollTop = container.scrollHeight;
    }

    function renderSpeakHistory() {
      const container = document.getElementById('speakHistory');
      container.innerHTML = '';
      speakHistoryArr.slice(-10).forEach(text => {
        const div = document.createElement('div');
        div.classList.add('message', 'user');
        const span = document.createElement('span');
        span.innerText = text;
        div.appendChild(span);
        container.appendChild(div);
      });
      container.scrollTop = container.scrollHeight;
    }

    function sendMessage() {
      const input = document.getElementById('userInput');
      const text = input.value.trim();
      if (!text) return;
      addChatMessage('user', text);
      input.value = '';
      fetchAssistantReply(text);
    }

    function addChatMessage(sender, text) {
      chatHistoryArr.push({ sender, text });
      if (chatHistoryArr.length > 10) chatHistoryArr = chatHistoryArr.slice(-10);
      saveAllData();
      renderChatHistory();
    }

    function addSpeakMessage(text) {
      speakHistoryArr.push(text);
      if (speakHistoryArr.length > 10) speakHistoryArr = speakHistoryArr.slice(-10);
      saveAllData();
      renderSpeakHistory();
    }

    function fetchAssistantReply(userInput) {
      const reply = "This is a sample assistant reply to: " + userInput;
      addChatMessage('assistant', reply);
      const utterance = new SpeechSynthesisUtterance(reply);
      speechSynthesis.speak(utterance);
    }

    function loadSettings() {
      const storedTopicsChat = localStorage.getItem('topics-chat');
      if (storedTopicsChat) {
        const values = JSON.parse(storedTopicsChat);
        const select = document.getElementById('topics-chat');
        for (let option of select.options) {
          option.selected = values.includes(option.value);
        }
      }
      const storedTopicsSpeak = localStorage.getItem('topics-speak');
      if (storedTopicsSpeak) {
        const values = JSON.parse(storedTopicsSpeak);
        const select = document.getElementById('topics-speak');
        for (let option of select.options) {
          option.selected = values.includes(option.value);
        }
      }
      const darkChat = localStorage.getItem('darkToggleChat');
      if (darkChat === 'true') {
        document.getElementById('darkToggleChat').checked = true;
        document.body.classList.add('dark-mode');
      }
      const darkSpeak = localStorage.getItem('darkToggleSpeak');
      if (darkSpeak === 'true') {
        document.getElementById('darkToggleSpeak').checked = true;
        document.body.classList.add('dark-mode');
      }
    }

    function saveSettings() {
      const selectChat = document.getElementById('topics-chat');
      const selectedChat = Array.from(selectChat.selectedOptions).map(o => o.value);
      localStorage.setItem('topics-chat', JSON.stringify(selectedChat));

      const selectSpeak = document.getElementById('topics-speak');
      const selectedSpeak = Array.from(selectSpeak.selectedOptions).map(o => o.value);
      localStorage.setItem('topics-speak', JSON.stringify(selectedSpeak));

      const darkChat = document.getElementById('darkToggleChat').checked;
      localStorage.setItem('darkToggleChat', darkChat);

      const darkSpeak = document.getElementById('darkToggleSpeak').checked;
      localStorage.setItem('darkToggleSpeak', darkSpeak);
    }

    function saveAllData() {
      saveHistory();
      saveSettings();
    }

    window.onload = () => {
      updateCarousel();
      loadHistory();
      loadSettings();
    };
  </script>
</body>
</html>
